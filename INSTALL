Table of contents
=================
    1. MANUAL INSTALLATION
    2. AUTOMATIC DEPLOYMENT
    3. UPDATE STEPS
    4. UPGRADE FROM OLD LAYOUT


##########################
# 1. MANUAL INSTALLATION #
##########################

# Reference platform: Debian 6.0 Squeeze, Python 2.6 and Django 1.5

    adduser confine
    su confine
    sudo adduser confine sudo
    
    # FOR PRODUCTION
        sudo apt-get install pip
        sudo pip install confine-controller
    
    # FOR DEVELOPMENT
        git clone gitosis@git.confine-project.eu:confine/controller.git ~confine/confine-controller
        sudo echo ~confine/confine-controller/ > /usr/local/lib/python2.6/dist-packages/controller.pth
        sudo ln -s ~confine/confine-controller/scripts/controller-admin.sh /usr/local/bin/
    
    # Minimal instance setup
    sudo controller-admin.sh install_requirements --minimal
    cd ~confine
    controller-admin.sh clone communitylab [ ~confine/controller ] [ --skeletone ]
    sudo python manage.py setuppostgres [ --user ] [ --password ] [ --name ] [ --noinput ]
    python manage.py syncdb
    python manage.py migrate
    python manage.py createsuperuser
    
    # Fully featured setup (Optional and not needed for devel)
    sudo controller-admin.sh install_requirements
    sudo python manage.py setupapache
    python manage.py collectstatic --noinput
    sudo python manage.py setupceleryd
    sudo python manage.py createtincserver
    python manage.py updatetincd
    sudo python manage.py setupfirmware
    python manage.py loaddata firmwareconfig
    
    # Apply changes
    sudo python manage.py restartservices



###########################
# 2. AUTOMATED DEPLOYMENT #
###########################

    sudo controller-admin.sh deploy --type ( local, container, bootable, chroot )



###################
# 3. UPDATE STEPS #
###################

1. Satisfy your level of requirements
    sudo controller-admin.sh install_requirements [ --minimal ]

2. Update database
    python manage.py syncdb
    python manage.py migrate

3. Apply changes
    sudo python manage.py restartservices



#####################################
# 4. MIGRATION FROM OLD CODE LAYOUT #
#####################################

1. Save somewhere your controller/settings.py file
2. Remove all the code base
3. Install your choice (production or development):
    https://wiki.confine-project.eu/soft:server-installation (Quick Install secction)
4. Carfully migrate your old settings.py file into the new PROJECT_DIR/settings.py
5. Make sure you have the minimal requirements
    sudo controller-admin.sh install_requirements --minimal
6. Apply any pending database schema migrations
    python manage.py syncdb
    python manage.py migrate
7. sudo python manage.py restartservices
