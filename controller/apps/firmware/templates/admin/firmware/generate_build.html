{% extends "admin/firmware/base_build.html" %}
{% load staticfiles utils %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />
{% endblock %}

{% block content %}
{{ block.super }}
<form action="" method="post">{% csrf_token %}
  <div>
  <ul>
    <li><b>Node:</b> {{ node }}</li>
    <li><b>Base Image:</b> {{ base_image }}</li>
  </ul>
    <div style="margin:20px;">
    <fieldset class="module aligned">
        <h2>Optional files</h2>
        {% for field in form %}
        <div class="form-row ">
            <div >
            {{ field.errors }}
            {{ field }} <label for="{{ field.id_for_label }}" class="vCheckboxLabel">{{ field.label }}</label>
            <p class="help">{{ field.help_text|safe }}</p>
            </div>
        </div>
        {% endfor %}
    </fieldset>
    
    {% for plugin in plugins %}
    <fieldset class="module aligned ">
      <h2>{{ plugin.instance.verbose_name }}</h2>
        {% for field in plugin.instance.form %}
        <div class="form-row ">
            <div >
            {{ field.errors }}
            {% if field|is_checkbox %}
                {{ field }} <label for="{{ field.id_for_label }}" class="vCheckboxLabel">{{ field.label }}</label>
            {% else %}
                {{ field.label_tag }} {{ field }}
            {% endif %}
            <p class="help">{{ field.help_text|safe }}</p>
            </div>
        </div>
        {% endfor %}
    </fieldset>
    {% endfor %}
    
    </div>
      <input type="hidden" name="action" value="get_firmware" />
      <input type="hidden" name="post" value="yes" />
      <div style="float:left;">
        <input type="submit" class="default" value="Build firmware !"/>
      </div>
  </div>
</form>
{% endblock %}
